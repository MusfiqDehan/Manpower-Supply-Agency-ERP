{% if company_cost_category_list %}
  {% for data in company_cost_category_list %}
    <tr class="hover-actions-trigger btn-reveal-trigger position-static">

      <td class="align-middle white-space-nowrap pe-4 text-center text-uppercase border-end">
        <a class="fw-semi-bold" href=" ">{{ data.name}}</a>
      </td>

      <td class="align-middle white-space-nowrap text-end pe-0 ps-11 ">
        <div class="font-sans-serif btn-reveal-trigger position-static">
          <div style="display: flex" class="end-0">
            <!-- view will be added later -->
                <div>
                  <button class="btn costCategoryEditButton btn-phoenix-secondary btn-icon me-1 fs--2 text-900 px-0"
                          data-url="{% url 'company_cost_app:company_cost_category_edit' data.id %} "
                          data-id="{{ data.category.id }}">
                    <span class="fas fa-edit"></span>
                </button>
                </div>

                <div>
                  <button class="btn costCategoryDeleteButton btn-phoenix-secondary btn-icon fs--2 text-danger px-0"
                           data-url="{% url 'company_cost_app:company_cost_category_delete' data.id %} ">
                    <span class="fas fa-trash"></span>
                </button>
                </div>

          </div>
        </div>
      </td>
    </tr>
  {% endfor %}
{% else %}
  <tr>
    <td colspan="7" class="text-center" style="color: red;">No Document Available</td>
  </tr>
{% endif %}
<script>
  $(function(){
    var loadForm=function(){

      $.ajax({
        url:$(this).attr('data-url'),
        type:'get',
        dataType:'json',

        success:function(data){
          $('#CompanyCostCategoryModal .modal-content').html(data.html_form)
          $('#CompanyCostCategoryModal').modal('show')
          console.log('loadform')
        }

      })
    }
    var saveForm=function(){

        var form=$(this)
        var formdata=new FormData(form[0])
        $.ajax({
          url:form.attr('action'),
          type:form.attr('method'),
          data:formdata,

          contentType:false,
          processData:false,
          dataType:'json',

          beforeSend:function(){

          },
          success:function(data){
            console.log('saveform')
            if(data.form_is_valid){
            $('#cost_category_table tbody').html(data.company_cost_category)
            $('#CompanyCostCategoryModal').modal('hide')
            }else{
              $('#CompanyCostCategoryModal .modal-content').html(data.html_form)
              $('#CompanyCostCategoryModal').modal('show')
            }
          }
        })
        return false
    }
    //create
    $('#addCostCategoryButton').on('click',loadForm)
    $('#CompanyCostCategoryModal').on('submit','.companyCostCategoryCreateForm',saveForm)

    //edit
    $('.costCategoryEditButton').on('click',loadForm)
    $('#CompanyCostCategoryModal').on('submit','.companyCostCategoryEditForm',saveForm)

    //delete
    $('.costCategoryDeleteButton').on('click',loadForm)
    $('#CompanyCostCategoryModal').on('submit','.companyCostCategoryDeleteForm',saveForm)
  })
</script>